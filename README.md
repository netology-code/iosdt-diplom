# Курсовой проект «Работа с сетью и хранение данных»

В качестве курсового проекта вы разработаете приложение для просмотра прогноза погоды. Вы примените полученные знания:

- адаптивная вёрстка экранов;

- различные навигационные паттерны в iOS;

- использование и настройка визуальных компонентов;

- использование UITableView, UICollectionView и кастомных ячеек;

- работа с сетью, а именно:
  - получение данных из сети,
  - обработка этих данных,
  - сохранение этих данных в базу данных.

## Требования к проекту

- Проект должен запускаться без ошибок;
- Вёрстка приложения реализована либо в коде, либо в Interface Builder;
- Вёрстка приложения адаптивная, интерфейс выглядит хорошо на различных устройствах, в том числе на iPad;
- Код проекта написан в одном стиле. Обратите внимание на названия классов, переменных и функций;
- Сетевые запросы запускаются не в основном потоке, UI не тормозится.

## Работа с данными

Все данные по погоде должны кэшироваться в базе данных. Можно использовать любой фреймворк, который будет вам удобен, — CoreData или Realm и различного рода обёртки).

## Работа с сетью

Можете использовать любой фреймворк для работы с сетью, предпочтительнее использовать Alamofire или Moja.

Для работы с JSON также не возбраняется использовать фреймворк, однако предпочтительнее использовать Decodable.

## Подробнее про API

Для запроса погоды можно использовать:
* https://openweathermap.org/api;
* https://rapidapi.com/stefan.skliarov/api/AccuWeather;
* https://developer.yr.no;
* https://yandex.ru/dev/weather/ — бесплатно месяц;
* https://rapidapi.com/blog/access-global-weather-data-with-these-weather-apis/.

Для геокодинга, то есть перевода названий мест в координаты, можете использовать API Яндекса — https://yandex.ru/dev/maps/geocoder/doc/desc/concepts/about.html.


## Работа с дизайном

Для того, чтобы условия разработки были максимально приближенными к реальности, весь дизайн приложения отрисован в Figma — [проект](https://www.figma.com/file/z7Z9JYnxoOI4g4nVCX8BYU/погода?node-id=0%3A1) и [резервная копия](./погода.fig). Все картинки, цвета и расположения элементов находятся в проекте Figma. 

Работа с Figma максимально интуитивная, но если вам что-то будет непонятно, то посмотрите [пятиминутное видео с подробным рассказом](https://www.youtube.com/watch?v=c1sCRKOWTQw). 

Если хотите изучить Фигму подробнее, то посмотрите [курс по Фигме от Нетологии](https://netology.ru/programs/osnovy-figma).

## Дизайн приложения

**Онбординг**

Прежде всего после первого запуска приложения надо спросить у пользователя о разрешении на использование геолокации, так как это необходимо с точки зрения политики конфиденциальности — для этого используется экран, который называется онбординг: 

<img src="/Design/1.jpg" align="middle" height="433" width="200" >

**Основной экран**

После того, как пользователь дал или не дал согласие на использование местоположения, он проваливается на следующий экран, который будем именовать основным.

<img src="/Design/3.jpg" align="middle" height="433" width="200" >

Это и есть основной экран приложения, на котором будет отображаться погода, влажность, осадки, длина светового дня, время, дата и скорость ветра. Дальше речь пойдёт об элементах основного экрана

**Слайдер**

Сверху у вас есть слайдер. Если вы разрешили доступ к геолокации, то по умолчанию у вас будет экран с погодой для вашего гео. Если нет, то показывайте пустой экран с +, как на картинке ниже. Дизайн не отрисован.

<img src="/Design/addScreen.png" align="middle">

**Кнопка местоположения**

На основном экране сверху справа есть кнопка о выборе местоположения. Это кнопка добавления нового города. При нажатии на неё должен появиться UIAlertController с возможностью ввода города. Дизайна также нет, даётся стандартный UIAlertController. 
После ввода и нажатия на кнопку «ОК» надо перевести название города в координаты — это необходимо, так как большинство погодных сервисов принимают на вход пару координат: долготу и широту. Это легче всего делать с помощью сервиса [Яндекса](https://yandex.ru/dev/maps/geocoder/). Подробнее про этот сервис можете прочитать [в документации](https://yandex.ru/dev/maps/geocoder/doc/desc/concepts/about.html).

После такого действия в слайдере (pageViewController) появится ещё один вариант с новым добавленным городом.

**Кнопка настроек**

Кнопка слева сверху открывает настройки, которые выглядят:

<img src="/Design/2.jpg" align="middle" height="433" width="200" >

По умолчанию список погоды содержит семь ячеек, то есть на семь ближайших дней. Но при нажатии на кнопку «25 дней», список с погодой у вас увеличивается до 25 ячеек, если вы сможете найти такое API, текст на кнопке меняется на «7 дней». При нажатии ещё раз — это возвращает вас в изначальный вариант погоды на 7 дней.

**«Подробнее на 24 часа»**

<img src="/Design/4.jpg" align="middle" height="433" width="200" >

Если дальше исследовать основной экран, то ниже вы найдете кнопку «подробнее на 24 часа». При нажатии на неё должен открываться экран, показанный выше, в котором отображается подробная информация о погоде на сутки.

На этом горизонтальном списке, его лучше всего делать с помощью UICollectionView, показывается погода на ближайшие сутки. При выборе элемента на экране ниже вы попадаете на экран «подробнее на 24 часа» для текущего дня.

![](/Design/5.jpg)

При запуске приложения до того, как будет получен ответ о погоде, вам необходимо показывать закешированные значения погоды.

## Карта работы приложения
Тут интерактивно показано какой экран будет открываться при нажатии на какую кнопку

![](/Design/mapOfApp.png)

## Виджет*
Дополнительно в дизайне отрисован виджет, можете добавить его в своём проекте, если вам рассказывали как или вам просто интересно.

## Отправка работы на проверку

Чтобы отправить работу на проверку, загрузите репозиторий на GitHub.

### Как правильно задавать вопросы дипломному руководителю

**Что поможет решить большинство частых проблем**
1. Перед началом работы над проектом необходимо договориться с дипломным руководителем о том, как вы будете сдавать работу на проверку: частями или полностью, файлом или через PR, а также обсудить все вопросы, чтобы не было недопонимания в будущем. 
2. При возникновении вопросов попробовать найти ответ сначала самому в интернете. Умение искать ответы пригодится вам в профессиональной деятельности. После самостоятельного поиска можно спрашивать руководителя.
3. Если вопросов больше одного, то присылайте их в виде нумерованного списка. Так дипломному руководителю будет проще отвечать на каждый из них.
4. При необходимости прикрепите к вопросу скриншоты и стрелочкой покажите, где не получается. Программу для этого можно скачать [здесь](https://app.prntscr.com/ru).
5. Распределяйте нагрузку, планируйте время на обучение и начинайте работу над дипломом как можно раньше, чтобы у вас было больше времени на правки и доработку проекта.

**Что может стать источником проблем**
1. Вопросы вида «Ничего не работает, не запускается, всё сломалось». Дипломный руководитель не сможет ответить на такой вопрос без дополнительных уточнений. Цените своё время и время других.
2. Откладывание проекта на последний момент.
3. Ожидание моментального ответа на свой вопрос. Дипломные руководители — работающие разработчики, которые кроме преподавания занимаются своими проектами. Их время ограничено, поэтому постарайтесь задавать правильные вопросы, чтобы получать быстрые ответы :)
